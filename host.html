<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>LNSY EDIT HOST</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
  <script src="helpers.js" type="module"></script>
  <script src="qr-code.js" type="module"></script>
  <script src="peer-component.js" type="module"></script>
  <script src="b64.js"></script>
  <style>
    body {
      background-color: black;
      color: white;
      font-family: monospace;
    }

  </style>

</head>
<body>


<script>
  
  function getURLValues(URL = window.location.href ){
    const search_params = new URLSearchParams(URL)
    let options = {}
    for (const [key, unparsed_value] of search_params) {
      if(key !== window.location.origin + window.location.pathname + '?' ){
        try {
          const value = JSON.parse(decodeURI(unparsed_value))
          options[key] = value
        } catch {
          options[key] = decodeURI(unparsed_value)
        }
      }
    }
    return options
  }

  const options = getURLValues()
  if(options['target-id']){
    const new_peer = document.createElement('peer-component')
    new_peer.setAttribute('target-id', options['target-id'])
    document.body.prepend(new_peer)
  }

  document.requestFullscreen()



</script>
</body>
</html>